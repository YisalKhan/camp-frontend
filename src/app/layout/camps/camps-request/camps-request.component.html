<div [@routerTransition]>
	<ngx-spinner
    bdOpacity = 0.9
    bdColor = "#333"
    size = "medium"
    color = "#fff"
    type = "ball-newton-cradle"
    [fullScreen] = "true">
	<p style="color: white" > Loading... </p>
	</ngx-spinner>
  <app-page-header [heading]="'Camps'" [icon]="'fa-users'"></app-page-header>
	<div class="row">
		<div class="col col-xl-12 col-lg-12">
			<div class="card mb-3">
				<div class="card-header">
					<!-- Filters -->
					<form [formGroup]="campFilter" (ngSubmit)="onSubmit()" style="display: flex;">
						<div class="camp-filter">
							<label>Doctor Name</label>
							<input class="form-control" formControlName="doctorName" placeholder="Filter by Doctor Name" />
						</div>
						<div class="camp-filter">
							<label>Camp Type</label>
							<select class="form-control" [value]="" formControlName="campType">
								<option value="">Select Camp Type</option>
								<option value="1">Cardio Camp</option>
								<option value="2">Dibetic Camp</option>
								<option value="3">Cardio/Dibetic Camp</option>
							</select>
						</div>
						<div class="camp-filter">
							<label>Camp Status</label>
							<select class="form-control" [value]="" formControlName="campStatus">
								<option value="">Select Camp</option>
								<option value="0">Pending</option>
								<option value="1">Approved</option>
								<option value="2">Close</option>
							</select>
						</div>
						<div class="camp-filter" *ngIf = "previous == 'previousCamps' || future == 'futureCamps'">
							<label>Start Date</label>
							<input type="date" class="form-control" formControlName="startDate" />
						</div>
						<div class="camp-filter" *ngIf = "previous == 'previousCamps' || future == 'futureCamps'">
							<label>End Date</label>
							<input type="date" class="form-control" formControlName="endDate" />
						</div>
						<div class="camp-filter" style="padding-top: 30px;">
							<button type="submit" class="btn btn-primary"> Apply </button>
						</div>
						<div class="camp-filter" style="padding-top: 30px;">
							<button type="button" (click)="onReset()" class="btn btn-success"> Reset </button>
						</div>
					</form>
				</div>
				<div class="card-body table-responsive">
					<table class="table table-hover table-striped">
						<thead>
							<tr>
								<th>SPO Name</th>
								<th>Team</th>
								<th>Region</th>
								<th>District</th>
								<th>Territory</th>
								<th>Camp Type</th>
								<th>Dr Name</th>
								<th>Camp Date/Time</th>
								<th>Camp Status</th>
								<th *ngIf = "!previous && !future">Action</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let camp of camps">
								<td>{{ camp.user.name }}</td>
								<td>{{ camp.user.user_team.team_name }}</td>
								<td>{{ camp.user.user_region.region_name }}</td>
								<td>{{ camp.user.user_district.district_name }}</td>
								<td>{{ camp.user.user_territory.territory_name }}</td>
								<td *ngIf="camp.camp_type == 1">Cardio Camp</td>
								<td *ngIf="camp.camp_type == 2">Dibetic Camp</td>
								<td *ngIf="camp.camp_type == 3">Cardio/Dibetic Camp</td>
								<td>{{ camp.dr_name }}</td>
								<td>{{ camp.camp_datetime }}</td>
								<td *ngIf="camp.camp_status == 0">Pending</td>
								<td *ngIf="camp.camp_status == 1">Approved</td>
								<!-- <td>{{ camp.camp_status }}</td> -->
								<td *ngIf = "!previous && !future">
									<div class="btn-group" role="group" aria-label="...">
										<button type="button" (click)="viewCamp(camp.id)" class="btn btn-primary">View/Edit</button>
										<button type="button" (click)="deleteCamp(camp.id)" class="btn btn-danger">Delete</button>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
